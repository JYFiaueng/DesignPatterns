2016年6月9日 21:44:55

享元模式：此模式是一种用于性能优化的模式，核心是运用共享技术来有效支持大量细粒度的对象。

如果系统中因为创建了大量类似的对象而导致内存占用过高，享元模式就有用武之地了。

享元模式要求将对象的属性划分为内部状态与外部状态（状态在这里通常指属性），享元模式的目的是尽量减少共享对象的数量，下面是划分的几条经验：
①内部状态存储与对象内部
②内部状态可以被一些对象共享
③内部状态独立于具体的场景，通常不会改变
④外部状态取决于具体的场景，并根据场景而变化，外部状态不能共享

剥离了外部状态的对象称为共享对象，外部状态在必要时被传入共享对象来组装成一个完整的对象。

享元模式是一种用事件换空间的优化模式。

内部状态有多少中组合，系统中便最多存在多少个对象。

适用性：一个程序中使用大量相似对象，造成很大内存开销，对象的大多数状态都可变为外部状态。

对象池：对象池维护一个装载空闲对象的池子，如果需要对象的时候，不是直接new，而是转从对象池里获取，如果对象池里没有空闲对象，则创建一个新的对象，当获取出的对象完成它的职责之后，再进入池子等待被下次获取。
例如图书馆就像是一个对象池，里面的书就是空想对象，HTTP连接池和数据库连接池也都是其代表应用。